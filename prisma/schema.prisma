// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum CourseType {
  Compulsory
  Elective
  General
}

model Course {
  id               Int             @id // year * 100000 + term * 10000 + serial
  year             Int
  term             Int
  name             String
  teachers         Teacher[]
  department       Department?     @relation(fields: [department_id], references: [id])
  department_id    String?
  code             String
  type             CourseType
  grade            Int?
  credit           Int
  serial           Int
  group            String
  quota_limit      Int
  quota_additional Int
  schedule         Json
  programs         CourseProgram[]
  comment          String
  restrict         String
  form_s           String
  classes          String
  dept_group       String
  hours            Int
  description      String
  goals            String[]
  syllabus         String
  methodologies    Json
  grading          Json
  prerequisite     String
  general_core     String[]
  createdAt        DateTime        @default(now())
  updatedAt        DateTime        @updatedAt
}

model Teacher {
  id        String   @id
  name      String
  courses   Course[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Department {
  id        String   @id
  name      String?
  courses   Course[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model CourseProgram {
  id        String   @id
  name      String
  courses   Course[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
